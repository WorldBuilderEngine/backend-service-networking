{
  "version": "2026-03-01",
  "services": [
    {
      "service_name": "backend-discovery-home",
      "base_url": "http://backend-discovery-home.discovery.svc.cluster.local:8790",
      "api_contracts": [
        "worldbuilder.discovery.home_feed.v1"
      ]
    },
    {
      "service_name": "backend-data-center",
      "base_url": "http://backend-data-center.infrastructure.svc.cluster.local:8790",
      "api_contracts": [
        "worldbuilder.discovery.catalog.v1",
        "worldbuilder.discovery.detail.v1",
        "worldbuilder.discovery.schema.v1",
        "worldbuilder.discovery.play-session.get.v1",
        "worldbuilder.discovery.publish.create.v1"
      ]
    },
    {
      "service_name": "backend-auth",
      "base_url": "http://backend-auth.infrastructure.svc.cluster.local:8791",
      "api_contracts": [
        "worldbuilder.auth.register.v1",
        "worldbuilder.auth.login.v1",
        "worldbuilder.auth.refresh.v1",
        "worldbuilder.auth.guest-upgrade.v1"
      ]
    },
    {
      "service_name": "backend-accounts",
      "base_url": "http://backend-accounts.infrastructure.svc.cluster.local:8787",
      "api_contracts": [
        "worldbuilder.accounts.internal-bootstrap.v1",
        "worldbuilder.accounts.get-by-id.v1",
        "worldbuilder.accounts.get-by-identity.v1",
        "worldbuilder.accounts.update.v1"
      ]
    },
    {
      "service_name": "backend-identity",
      "base_url": "http://backend-identity.infrastructure.svc.cluster.local:8786",
      "api_contracts": [
        "worldbuilder.identity.profile.upsert.v1",
        "worldbuilder.identity.profile.get.v1",
        "worldbuilder.identity.policy-evaluation.v1"
      ]
    }
  ],
  "publish_ingress_policy": {
    "policy_owner_product": "backend-service-networking",
    "publish_api_contract": "worldbuilder.discovery.publish.create.v1",
    "default_max_body_bytes": 67108864,
    "required_hops": [
      {
        "hop_name": "backend-edge",
        "product": "backend-edge",
        "max_body_bytes_env_var": "WORLD_BUILDER_EDGE_MAX_JSON_BODY_BYTES"
      },
      {
        "hop_name": "backend-gateway",
        "product": "backend-gateway",
        "max_body_bytes_env_var": "WORLD_BUILDER_APOLLO_MAX_JSON_BODY_BYTES"
      },
      {
        "hop_name": "backend-data-center",
        "product": "backend-data-center",
        "max_body_bytes_env_var": "WORLD_BUILDER_DATA_CENTER_MAX_JSON_BODY_BYTES"
      }
    ],
    "observability": {
      "rejection_metric_name": "worldbuilder_publish_ingress_payload_rejected_total",
      "rejection_log_fields": [
        "publishIngressHop",
        "configuredMaxBodyBytes",
        "requiredPolicyBytes",
        "requestContentLength",
        "requestId",
        "apiContract"
      ]
    }
  }
}
